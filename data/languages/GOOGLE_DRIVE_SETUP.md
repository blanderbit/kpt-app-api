# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive –¥–ª—è Language Module

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Google Cloud Project** - –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console
2. **Google Drive API** - –≤–∫–ª—é—á–µ–Ω–Ω—ã–π API –¥–ª—è Google Drive
3. **Service Account** - —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
4. **NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–æ–¥—É–ª–µ–º Language

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Google Cloud Project

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ **Project ID** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ Google Drive API

1. –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** > **Library**
2. –ù–∞–π–¥–∏—Ç–µ **Google Drive API**
3. –ù–∞–∂–º–∏—Ç–µ **Enable**

### 3. –°–æ–∑–¥–∞–Ω–∏–µ Service Account

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** > **Credentials**
2. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** > **Service Account**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - **Name**: `language-module-service`
   - **Description**: `Service account for language management`
4. –ù–∞–∂–º–∏—Ç–µ **Create and Continue**
5. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —à–∞–≥–∏ —Å —Ä–æ–ª—è–º–∏ (–Ω–∞–∂–º–∏—Ç–µ **Continue**)
6. –ù–∞–∂–º–∏—Ç–µ **Done**

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è Service Account

1. –í —Å–ø–∏—Å–∫–µ Service Accounts –Ω–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ email –∞–∫–∫–∞—É–Ω—Ç–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys**
4. –ù–∞–∂–º–∏—Ç–µ **Add Key** > **Create new key**
5. –í—ã–±–µ—Ä–∏—Ç–µ **JSON** —Ñ–æ—Ä–º–∞—Ç
6. –ù–∞–∂–º–∏—Ç–µ **Create**
7. –§–∞–π–ª –∫–ª—é—á–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ Google Drive

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Drive](https://drive.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —è–∑—ã–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `KPT App Languages`)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –ø–∞–ø–∫–∏ –∏–∑ URL
4. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –ø–∞–ø–∫–æ–π —Å email Service Account:
   - –ù–∞–∂–º–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –ø–∞–ø–∫—É
   - –í—ã–±–µ—Ä–∏—Ç–µ **Share**
   - –í–≤–µ–¥–∏—Ç–µ email Service Account
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ **Editor**
   - –ù–∞–∂–º–∏—Ç–µ **Send**

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install googleapis
npm install @types/node --save-dev
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```env
# Google Drive Configuration
GOOGLE_DRIVE_KEY_FILE=./data/languages/google-drive-key.json
GOOGLE_DRIVE_ROOT_FOLDER_ID=your-root-folder-id
```

#### –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∫–ª—é—á–∞

1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∫–ª—é—á–∞ –≤ `google-drive-key.json`
2. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ –ø–∞–ø–∫—É `data/languages/`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```bash
curl -X GET "http://localhost:3000/admin/languages/google-drive/test-connection" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏** –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞** Service Account —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
# Production
GOOGLE_DRIVE_KEY_FILE=/etc/secrets/google-drive-key.json
GOOGLE_DRIVE_ROOT_FOLDER_ID=production-folder-id

# Development
GOOGLE_DRIVE_KEY_FILE=./data/languages/google-drive-key.json
GOOGLE_DRIVE_ROOT_FOLDER_ID=dev-folder-id
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ Google Drive

```
Google Drive
‚îî‚îÄ‚îÄ KPT App Languages/                    # –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞
    ‚îú‚îÄ‚îÄ en.json                           # –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
    ‚îú‚îÄ‚îÄ ru.json                           # –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
    ‚îú‚îÄ‚îÄ es.json                           # –ò—Å–ø–∞–Ω—Å–∫–∏–π —è–∑—ã–∫
    ‚îú‚îÄ‚îÄ fr.json                           # –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π —è–∑—ã–∫
    ‚îî‚îÄ‚îÄ Archived Languages/               # –ê—Ä—Ö–∏–≤–Ω–∞—è –ø–∞–ø–∫–∞
        ‚îú‚îÄ‚îÄ old-en-v1.json               # –°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏
        ‚îî‚îÄ‚îÄ deprecated-ru.json           # –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —è–∑—ã–∫–∏
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. **–°–æ–∑–¥–∞–Ω–∏–µ —è–∑—ã–∫–∞**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —è–∑—ã–∫ —á–µ—Ä–µ–∑ API
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –ø–æ—è–≤–∏–ª—Å—è –≤ Google Drive
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–ª–∞—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
   - –ò–∑–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª –≤ Google Drive
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ API
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

3. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ê—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ —è–∑—ã–∫ —á–µ—Ä–µ–∑ API
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –∞—Ä—Ö–∏–≤–Ω—É—é –ø–∞–ø–∫—É
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è –≤ –±–∞–∑–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —è–∑—ã–∫–∞
curl -X POST "http://localhost:3000/admin/languages" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "code": "de",
    "name": "German",
    "nativeName": "Deutsch",
    "direction": "ltr"
  }'

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
curl -X POST "http://localhost:3000/admin/languages/1/sync" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"force": true}'

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl -X GET "http://localhost:3000/admin/languages/statistics" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **"Google Drive API initialization failed"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–ª—é—á–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω –≤ Google Cloud Console

2. **"Permission denied"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–µ –≤ Google Drive
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ Editor

3. **"File not found"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –ø–∞–ø–∫–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω–∞

4. **"Authentication failed"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ Service Account
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –Ω–µ –∏—Å—Ç–µ–∫

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

–í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ NestJS:

```typescript
// main.ts
const app = await NestFactory.create(AppModule, {
  logger: ['error', 'warn', 'log', 'debug', 'verbose'],
});
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Google Drive API Documentation](https://developers.google.com/drive/api)
- [Google Cloud Console](https://console.cloud.google.com/)
- [Service Accounts Guide](https://cloud.google.com/iam/docs/service-accounts)
- [NestJS Configuration](https://docs.nestjs.com/techniques/configuration)

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–≤–æ—Ç API** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Google Drive API
2. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π** - –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–ª—é—á–∏ Service Account
3. **–ê—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–∞–º
4. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤–∞–∂–Ω—ã–µ —è–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Google Drive API
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Google Cloud

---

**–£—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏! üéâ**
